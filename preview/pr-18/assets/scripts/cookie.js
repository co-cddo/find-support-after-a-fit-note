(()=>{window.dataLayer=window.dataLayer||[];var i=location.hostname==="localhost",d=i?void 0:".cabinet-office.gov.uk",w=!i,h=i?"Lax":"None",y=e=>document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)")?.pop()||"";function t(){window.dataLayer.push(arguments)}function f(){if(typeof t!="function")return;t("js",new Date),t("config","G-LCRPJR51P6"),window.dataLayer.push({event:"analytics_enabled"});let e=document.createElement("script");e.src="https://www.googletagmanager.com/gtm.js?id=GTM-MV2BWF89",e.async=!0,document.head.appendChild(e)}function a(){try{let e=y("cookie-preferences");e&&JSON.parse(e).analytics==="on"&&f()}catch(e){console.error("Error parsing cookie preferences:",e)}}function l(e){[location.hostname,".cabinet-office.gov.uk"].forEach(c=>{document.cookie=`${e}=; path=/; domain=${c}; expires=Thu, 01 Jan 1970 00:00:00 GMT;`}),document.cookie=`${e}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT;`}function b(){["_ga","_gid","_ga_ID","analytics","cookie-preferences"].forEach(l)}var o={userPreferences:{cookieName:"cookie-preferences",cookieExpiry:365,cookieSecure:w,cookieSameSite:h},preferencesForm:{class:"cookie-preferences-form"},cookieBanner:{class:"cookie-banner",showWithPreferencesForm:!1,actions:[{name:"accept",buttonClass:"cookie-banner-accept-button",confirmationClass:"cookie-banner-accept-message",consent:!0},{name:"reject",buttonClass:"cookie-banner-reject-button",confirmationClass:"cookie-banner-reject-message",consent:!1},{name:"hide",buttonClass:"cookie-banner-hide-button"}]},cookieManifest:[{categoryName:"analytics",optional:!0,cookies:["analytics","_ga","_gid","_ga_ID"]}],additionalOptions:{defaultConsent:!1,deleteUndefinedCookies:!1,disableCookieBanner:!1,disableCookiePreferencesForm:!1}},C=(e,n,c,u,k,s)=>{let m=new Date(Date.now()+c*864e5).toUTCString(),g=u?"Secure;":"",p=s?`domain=${s};`:"";document.cookie=`${e}=${n}; ${p} expires=${m}; path=/; ${g} SameSite=${k}`},r=e=>{l(o.userPreferences.cookieName),C(o.userPreferences.cookieName,JSON.stringify(e),o.userPreferences.cookieExpiry,o.userPreferences.cookieSecure,o.userPreferences.cookieSameSite,d)},S=()=>{let e=document.querySelector(".cookie-banner-success");e&&(window.scrollTo({top:0,behavior:"smooth"}),e.removeAttribute("hidden"),e.focus())},M=e=>{e==="accept"?(r({analytics:"on"}),f()):e==="reject"&&(r({analytics:"off"}),b())};document.addEventListener("DOMContentLoaded",()=>{window.cookieManager&&(window.cookieManager.on("PreferenceFormSubmitted",()=>{S(),a()}),window.cookieManager.on("CookieBannerAction",e=>{M(e),a()}),typeof window.cookieManager.setConfig=="function"&&window.cookieManager.setConfig({cookieDomain:d}),window.cookieManager.init(o)),setTimeout(a,100)});})();
