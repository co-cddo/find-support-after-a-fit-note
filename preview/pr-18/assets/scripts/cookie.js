(()=>{window.dataLayer=window.dataLayer||[];var i=location.hostname==="localhost",f=i?void 0:".cabinet-office.gov.uk",p=!i,g=i?"Lax":"None",y=e=>document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)")?.pop()||"";function c(){window.dataLayer.push(arguments)}function d(){if(typeof c!="function")return;c("js",new Date),c("config","G-LCRPJR51P6"),window.dataLayer.push({event:"analytics_enabled"});let e=document.createElement("script");e.src="https://www.googletagmanager.com/gtm.js?id=GTM-MV2BWF89",e.async=!0,document.head.appendChild(e)}function w(e){e.forEach(o=>{[location.hostname,".cabinet-office.gov.uk"].forEach(t=>{document.cookie=`${o}=; path=/; domain=${t}; expires=Thu, 01 Jan 1970 00:00:00 GMT;`}),document.cookie=`${o}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT;`})}var b=(e,o,a,t,u,s)=>{let l=new Date(Date.now()+a*864e5).toUTCString(),m=t?"Secure;":"",k=s?`domain=${s};`:"";document.cookie=`${e}=${o}; ${k} expires=${l}; path=/; ${m} SameSite=${u}`},r=e=>{b(n.userPreferences.cookieName,JSON.stringify(e),n.userPreferences.cookieExpiry,n.userPreferences.cookieSecure,n.userPreferences.cookieSameSite,f)},h=()=>{let e=document.querySelector(".cookie-banner-success");e&&(window.scrollTo({top:0,behavior:"smooth"}),e.removeAttribute("hidden"),e.focus())},C=e=>{e==="accept"?(r({analytics:"on"}),d()):e==="reject"&&(r({analytics:"off"}),w(["_ga","_gid","_ga_ID","analytics"]))};(function(){let e=Object.getOwnPropertyDescriptor(Document.prototype,"cookie")||Object.getOwnPropertyDescriptor(HTMLDocument.prototype,"cookie");e&&e.set&&Object.defineProperty(document,"cookie",{configurable:!0,enumerable:!0,get:function(){return e.get.call(document)},set:function(o){o.startsWith("cookie-preferences=")&&!/domain=/.test(o)&&(o+="; domain=.cabinet-office.gov.uk"),e.set.call(document,o)}})})();var n={userPreferences:{cookieName:"cookie-preferences",cookieExpiry:365,cookieSecure:p,cookieSameSite:g},preferencesForm:{class:"cookie-preferences-form"},cookieBanner:{class:"cookie-banner",showWithPreferencesForm:!1,actions:[{name:"accept",buttonClass:"cookie-banner-accept-button",confirmationClass:"cookie-banner-accept-message",consent:!0},{name:"reject",buttonClass:"cookie-banner-reject-button",confirmationClass:"cookie-banner-reject-message",consent:!1},{name:"hide",buttonClass:"cookie-banner-hide-button"}]},cookieManifest:[{categoryName:"analytics",optional:!0,cookies:["analytics","_ga","_gid","_ga_ID"]}],additionalOptions:{defaultConsent:!1,deleteUndefinedCookies:!1,disableCookieBanner:!1,disableCookiePreferencesForm:!1}};document.addEventListener("DOMContentLoaded",()=>{let e=y("cookie-preferences");if(e)try{JSON.parse(e).analytics==="on"&&d()}catch(o){console.error("Failed to parse cookie-preferences:",o)}window.cookieManager&&(window.cookieManager.on("PreferenceFormSubmitted",()=>{h(),trySendAnalytics()}),window.cookieManager.on("CookieBannerAction",o=>{C(o),trySendAnalytics()}),typeof window.cookieManager.setConfig=="function"&&window.cookieManager.setConfig({cookieDomain:f}),window.cookieManager.init(n)),setTimeout(trySendAnalytics,100)});})();
