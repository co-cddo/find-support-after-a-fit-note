(()=>{window.dataLayer=window.dataLayer||[];var m=e=>document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)")?.pop()||"";function l(){dataLayer.push(arguments)}function p(){if(!document.getElementById("gtm-script")){let e=document.createElement("script");e.id="gtm-script",e.async=!0,e.src="https://www.googletagmanager.com/gtm.js?id=GTM-MV2BWF89",document.head.appendChild(e),window.dataLayer.push({"gtm.start":new Date().getTime(),event:"gtm.js"})}}function g(){document.getElementById("clarity-script")||function(e,t,o,n,r,c,i){e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},c=t.createElement(n),c.async=1,c.id="clarity-script",c.src="https://www.clarity.ms/tag/"+r,i=t.getElementsByTagName(n)[0],i.parentNode.insertBefore(c,i)}(window,document,"clarity","script","rgthjyi5pn")}function d(e){let t=window.location.hostname,o=t.split("."),n=o.length>=2?[t,"."+t,"."+o.slice(-2).join("."),o.slice(-2).join(".")]:[t],r=["/",""];n.forEach(c=>{r.forEach(i=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${i}; domain=${c};`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${i}; domain=${c}; Secure; SameSite=Lax`})}),r.forEach(c=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${c};`})}function u(){let e=document.getElementById("gtm-script");e&&e.remove();let t=document.getElementById("clarity-script");t&&t.remove(),window.dataLayer&&(window.dataLayer.length=0);let o=["_ga","_gid","_gat","_ga_LCRPJR51P6","_clck","_clsk","CLID","MUID","analytics"];console.log("Removing analytics cookies..."),o.forEach(n=>{console.log("Deleting cookie:",n),d(n)}),o.forEach(d)}function s(){l("js",new Date),l("config","G-LCRPJR51P6",{cookie_domain:"find-support-after-a-fit-note.digital.cabinet-office.gov.uk"}),p(),g()}var a={userPreferences:{cookieName:"cookie-preferences",cookieExpiry:365,cookieSecure:location.protocol==="https:",cookieSameSite:"Lax"},preferencesForm:{class:"cookie-preferences-form"},cookieBanner:{class:"cookie-banner",showWithPreferencesForm:!1,actions:[{name:"accept",buttonClass:"cookie-banner-accept-button",consent:!0},{name:"reject",buttonClass:"cookie-banner-reject-button",consent:!1}]},cookieManifest:[{categoryName:"analytics",optional:!0,cookies:["analytics","_ga","_gid","_clck","_clsk","CLID","MUID"]}],additionalOptions:{defaultConsent:!1,deleteUndefinedCookies:!1,disableCookieBanner:!1,disableCookiePreferencesForm:!1}},k=(e,t,o,n,r)=>{let c=new Date(Date.now()+o*864e5).toUTCString(),i=n?"Secure;":"";document.cookie=`${e}=${t}; expires=${c}; path=/; ${i} SameSite=${r}`},f=e=>{k(a.userPreferences.cookieName,JSON.stringify(e),a.userPreferences.cookieExpiry,a.userPreferences.cookieSecure,a.userPreferences.cookieSameSite)},y=function(e){console.log("PreferenceFormSubmitted fired:",e);let t=document.querySelector(".cookie-banner-success");window.scrollTo({top:0,behavior:"smooth"}),t.removeAttribute("hidden"),t.focus(),setTimeout(()=>{try{let o=m("cookie-preferences");o&&(JSON.parse(o).analytics==="on"?s():u())}catch(o){console.error("Error parsing cookie preferences:",o)}},200)},h=function(e){e==="accept"?(f({analytics:"on"}),s()):e==="reject"&&(f({analytics:"off"}),u())};window.cookieManager.on("PreferenceFormSubmitted",y);window.cookieManager.on("CookieBannerAction",h);window.cookieManager.init(a);try{let e=m("cookie-preferences");e&&JSON.parse(e).analytics==="on"&&s()}catch(e){console.error("Error parsing cookie preferences:",e)}})();
