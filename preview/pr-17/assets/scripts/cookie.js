(()=>{window.dataLayer=window.dataLayer||[];var p=e=>document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)")?.pop()||"";function a(){dataLayer.push(arguments)}function k(e){if(window.gtag){e();return}let o=document.createElement("script");o.src="https://www.googletagmanager.com/gtag/js?id=G-LCRPJR51P6",o.async=!0,o.onload=e,document.head.appendChild(o)}function c(){k(()=>{a("js",new Date),a("config","G-LCRPJR51P6",{cookie_flags:"secure;samesite=none",cookie_domain:"find-support-after-a-fit-note.digital.cabinet-office.gov.uk"}),dataLayer.push({event:"analytics_enabled"});let e=document.createElement("script");e.src="https://www.googletagmanager.com/gtm.js?id=GTM-MV2BWF89",e.async=!0,document.head.appendChild(e)})}function t(){try{let e=p("cookie-preferences");e&&JSON.parse(e).analytics==="on"&&c()}catch(e){console.error("Error parsing cookie preferences:",e)}}function r(e){document.cookie=`${e}=; path=/; domain=find-support-after-a-fit-note.digital.cabinet-office.gov.uk; expires=Thu, 01 Jan 1970 00:00:00 GMT;`,document.cookie=`${e}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT;`}function m(){["_ga","_gid","_ga_ID","analytics","cookie-preferences"].forEach(r)}var n={userPreferences:{cookieName:"cookie-preferences",cookieExpiry:365,cookieSecure:location.protocol==="https:",cookieSameSite:"Lax"},preferencesForm:{class:"cookie-preferences-form"},cookieBanner:{class:"cookie-banner",showWithPreferencesForm:!1,actions:[{name:"accept",buttonClass:"cookie-banner-accept-button",confirmationClass:"cookie-banner-accept-message",consent:!0},{name:"reject",buttonClass:"cookie-banner-reject-button",confirmationClass:"cookie-banner-reject-message",consent:!1},{name:"hide",buttonClass:"cookie-banner-hide-button"}]},cookieManifest:[{categoryName:"analytics",optional:!0,cookies:["analytics","_ga","_gid","_ga_ID"]}],additionalOptions:{defaultConsent:!1,deleteUndefinedCookies:!1,disableCookieBanner:!1,disableCookiePreferencesForm:!1}},w=(e,o,s,f,d)=>{let u=new Date(Date.now()+s*864e5).toUTCString(),l=f?"Secure;":"",g="domain=find-support-after-a-fit-note.digital.cabinet-office.gov.uk;";document.cookie=`${e}=${o}; expires=${u}; path=/; ${g} ${l} SameSite=${d}`},i=e=>{r(n.userPreferences.cookieName),w(n.userPreferences.cookieName,JSON.stringify(e),n.userPreferences.cookieExpiry,n.userPreferences.cookieSecure,n.userPreferences.cookieSameSite)},h=()=>{let e=document.querySelector(".cookie-banner-success");e&&(window.scrollTo({top:0,behavior:"smooth"}),e.removeAttribute("hidden"),e.focus())},y=e=>{e==="accept"?(i({analytics:"on"}),c()):e==="reject"&&(i({analytics:"off"}),m())};document.addEventListener("DOMContentLoaded",()=>{window.cookieManager&&(window.cookieManager.on("PreferenceFormSubmitted",()=>{h(),t()}),window.cookieManager.on("CookieBannerAction",e=>{y(e),t()}),typeof window.cookieManager.setConfig=="function"&&window.cookieManager.setConfig({cookieDomain:"find-support-after-a-fit-note.digital.cabinet-office.gov.uk"}),window.cookieManager.init(n)),setTimeout(t,100)});})();
